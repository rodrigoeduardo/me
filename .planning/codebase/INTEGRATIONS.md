# External Integrations

**Analysis Date:** 2026-02-04

## APIs & External Services

**None detected** - This is a self-contained portfolio/CMS with no third-party API integrations for external services (e.g., Stripe, SendGrid, Auth0).

## Data Storage

**Databases:**
- PostgreSQL (primary data store)
  - Connection: Environment variable `DATABASE_URL`
  - Client: Payload CMS via `@payloadcms/db-postgres` adapter
  - Configuration: `payload.config.ts`, lines 18-22

**File Storage:**
- Local filesystem
  - Media uploads stored in `public/media` directory
  - Configured in `src/collections/Media.ts`, line 6
  - Max file size: 5MB
  - Supported types: image/* (MIME type restriction)

**Caching:**
- None (no Redis, Memcached, or similar detected)

## Authentication & Identity

**Auth Provider:**
- Custom (Payload CMS built-in)
  - Implementation: JWT-based authentication
  - User model: `src/collections/Users.ts`
  - Fields: email, password, name, role (admin/editor)
  - Role field stored in JWT token (`saveToJWT: true`)
  - Endpoints:
    - Login: `POST /api/users/login`
    - Logout: `POST /api/users/logout`
    - Me: `GET /api/users/me`
  - Access control: User authentication required for admin operations, public read access for published content

## Content APIs

**REST API:**
- Endpoint: `/api/[...slug]`
- Generated and handled by Payload CMS
- Routes: `src/app/(payload)/api/[...slug]/route.ts` (auto-generated by Payload)
- Provides CRUD endpoints for all collections: posts, categories, media, users
- Example: `GET /api/posts?where[slug][equals]={slug}&where[status][equals]=published&limit=1&depth=1`
- Used in: `src/app/(site)/posts/[slug]/page.tsx`

**GraphQL API:**
- Endpoint: `/api/graphql`
- Provided by Payload CMS
- Route: `src/app/(payload)/api/graphql/route.ts` (auto-generated by Payload)
- Query language: GraphQL 16.12.0
- Used for flexible data querying with introspection support

**Client-side Data Fetching:**
- Library: SWR 2.3.8
- Fetcher function: `src/lib/fetcher.ts` (simple fetch wrapper that parses JSON)
- Used in:
  - `src/components/HomePostsSection.tsx` - Fetches recent posts via `/api/posts`
  - `src/components/PostsPageContent.tsx` - Fetches posts with pagination

## Monitoring & Observability

**Error Tracking:**
- None detected

**Logs:**
- Console logging only (no external logging service)

## CI/CD & Deployment

**Hosting:**
- Not pre-configured; supports any Node.js hosting (Vercel, self-hosted, Docker, etc.)

**CI Pipeline:**
- None detected (no GitHub Actions, GitLab CI, or similar configuration)

## Environment Configuration

**Required env vars:**
- `DATABASE_URL` - PostgreSQL connection string (critical)
- `PAYLOAD_SECRET` - Payload CMS secret (critical; recommend 32-byte base64 string)
- `NEXT_PUBLIC_SERVER_URL` - Public server URL (optional; defaults to `http://localhost:3000`)

**Secrets location:**
- Environment variables stored in `.env` file (not committed)
- Template provided in `.env.example`
- Payload secret generation: `openssl rand -base64 32`

## Webhooks & Callbacks

**Incoming:**
- None detected

**Outgoing:**
- None detected

## Collections & Data Schema

**Collections in Payload CMS:**

**Posts** (`src/collections/Posts.ts`):
- Slug: `posts`
- Fields: title (localized, required), slug (unique, required), excerpt (localized), content (richText, localized, required), coverImage (relation to media), category (relation to categories), status (draft/published), publishedAt (date)
- Localized: English and Portuguese (pt-BR)
- Access: Published posts public-readable; authenticated users can create/edit/delete
- Hooks: Auto-slug generation from title

**Categories** (`src/collections/Categories.ts`):
- Slug: `categories`
- Fields: name (localized, required), slug (unique, required), description (localized)
- Localized: English and Portuguese (pt-BR)
- Access: Public-readable; authenticated users can create/edit/delete

**Media** (`src/collections/Media.ts`):
- Slug: `media`
- Upload: `public/media` directory, images only, 5MB max
- Fields: alt (text, required)
- Access: Public-readable; authenticated users can upload/edit/delete

**Users** (`src/collections/Users.ts`):
- Slug: `users`
- Auth: enabled (JWT-based)
- Fields: email (unique, required), password, name, role (admin/editor, default: editor)
- Access: Self-read for users, admins can manage all users
- Role saved in JWT token for permission checks

---

*Integration audit: 2026-02-04*
