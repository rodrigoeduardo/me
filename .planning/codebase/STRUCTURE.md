# Codebase Structure

**Analysis Date:** 2026-02-04

## Directory Layout

```
rodrigoeduardo/
├── src/
│   ├── app/                          # Next.js app directory (route groups)
│   │   ├── (site)/                   # Public website routes
│   │   │   ├── posts/                # Post collection pages
│   │   │   │   └── [slug]/           # Individual post page
│   │   │   ├── SiteWrapper.tsx       # Layout wrapper (client)
│   │   │   ├── layout.tsx            # Site layout with fonts
│   │   │   └── page.tsx              # Home page
│   │   ├── (payload)/                # Payload admin & API
│   │   │   ├── admin/                # Admin panel (auto-generated)
│   │   │   │   └── [[...segments]]/  # Catch-all for admin routes
│   │   │   ├── api/                  # API endpoints
│   │   │   │   ├── [...]slug/        # REST API (auto-generated)
│   │   │   │   └── graphql/          # GraphQL endpoint (auto-generated)
│   │   │   └── layout.tsx            # Payload admin layout (auto-generated)
│   │   ├── globals.css               # Global theme & animation styles
│   │   ├── layout.tsx                # Root layout (metadata)
│   │   └── favicon.ico               # Favicon
│   ├── collections/                  # Payload CMS collection definitions
│   │   ├── Posts.ts                  # Posts collection config
│   │   ├── Categories.ts             # Categories collection config
│   │   ├── Media.ts                  # Media/upload collection config
│   │   └── Users.ts                  # Users collection config (auth)
│   ├── components/                   # React components
│   │   ├── animations/               # Animation components (Framer Motion)
│   │   │   ├── BlurText.tsx
│   │   │   ├── Particles.tsx
│   │   │   ├── ShinyText.tsx
│   │   │   └── index.ts              # Barrel export
│   │   ├── icons/                    # SVG icon components
│   │   │   ├── GitHubIcon.tsx
│   │   │   ├── LinkedInIcon.tsx
│   │   │   ├── MoonIcon.tsx
│   │   │   ├── SunIcon.tsx
│   │   ├── Footer.tsx                # Site footer
│   │   ├── Header.tsx                # Top navigation header
│   │   ├── Hero.tsx                  # Home page hero section
│   │   ├── HomePostsSection.tsx      # Home page recent posts (SWR)
│   │   ├── LanguageToggle.tsx        # i18n switcher component
│   │   ├── PostCard.tsx              # Individual post card
│   │   ├── PostList.tsx              # Grid of post cards
│   │   ├── PostPageContent.tsx       # Single post page content + RichTextRenderer
│   │   ├── PostsPageContent.tsx      # Posts listing page
│   │   └── ThemeToggle.tsx           # Dark mode switcher
│   └── lib/                          # Utilities & hooks
│       ├── i18n.tsx                  # i18n Context, hooks, translations
│       └── fetcher.ts                # SWR-compatible HTTP fetcher
├── public/
│   ├── assets/                       # Static assets
│   │   └── cvs/                      # CV files (en/pt-BR)
│   ├── media/                        # Uploaded media (generated by Payload)
├── payload.config.ts                 # Payload CMS configuration
├── tsconfig.json                     # TypeScript config
├── tailwind.config.ts                # Tailwind CSS config
├── payload-types.ts                  # Auto-generated Payload types
├── .env.example                      # Environment variable template
├── next.config.ts                    # Next.js configuration
├── eslint.config.mjs                 # ESLint configuration
├── .prettierrc                       # Prettier configuration
└── package.json                      # Dependencies & scripts
```

## Directory Purposes

**`src/app/(site)/`:**
- Purpose: Public-facing website pages and layouts
- Contains: Home page, posts collection page, individual post pages
- Key files: `page.tsx` (routes), `layout.tsx` (styling, fonts), `SiteWrapper.tsx` (provider)

**`src/app/(payload)/`:**
- Purpose: Payload CMS admin panel and REST/GraphQL API
- Contains: Auto-generated admin UI, API route handlers
- Key files: `admin/[[...segments]]/page.tsx` (admin), `api/[...slug]/route.ts` (REST), `api/graphql/route.ts` (GraphQL)

**`src/collections/`:**
- Purpose: Payload CMS schema definitions
- Contains: Collection configs with fields, access rules, hooks
- Key files: `Posts.ts`, `Categories.ts`, `Users.ts`, `Media.ts`

**`src/components/`:**
- Purpose: Reusable React components for public site
- Contains: Layout components (Header, Footer), content components (Hero, PostCard), animations, icons
- Key files: `Header.tsx`, `PostPageContent.tsx` (main content renderer)

**`src/lib/`:**
- Purpose: Shared utilities and context providers
- Contains: i18n (Context, hooks, translations), HTTP fetcher
- Key files: `i18n.tsx` (language management), `fetcher.ts` (SWR helper)

**`public/media/`:**
- Purpose: Uploaded image files managed by Payload CMS
- Contains: Media uploaded via Payload admin
- Generated: Yes (by Payload on-demand)
- Committed: Yes (images checked in)

**`public/assets/cvs/`:**
- Purpose: Static CV/resume PDF files
- Contains: `rodrigoeduardo-cv-en.pdf`, `rodrigoeduardo-cv-pt.pdf`
- Committed: Yes

## Key File Locations

**Entry Points:**
- `src/app/layout.tsx`: Root layout wrapping all routes (metadata, RootLayout wrapper)
- `src/app/(site)/page.tsx`: Home page (Hero + HomePostsSection)
- `src/app/(site)/posts/page.tsx`: Posts listing page
- `src/app/(site)/posts/[slug]/page.tsx`: Individual post page (RSC data fetch)

**Configuration:**
- `payload.config.ts`: Payload CMS setup (collections, database, editor, TypeScript output)
- `tailwind.config.ts`: Tailwind CSS theme configuration
- `tsconfig.json`: TypeScript compiler options
- `.env.example`: Required environment variables

**Core Logic:**
- `src/collections/Posts.ts`: Post schema with localization, status, slug generation
- `src/lib/i18n.tsx`: Locale state management and translations (en/pt-BR)
- `src/components/PostPageContent.tsx`: Post rendering with RichTextRenderer (core content display)
- `src/components/HomePostsSection.tsx`: SWR client-side data fetching for recent posts

**Styling:**
- `src/app/globals.css`: Global theme (CSS variables), animations, scrollbar styling
- Theme via Tailwind + CSS variables: `--background`, `--foreground`, `--highlight`
- Dark mode: Applied via `.dark` class on `<html>`

## Naming Conventions

**Files:**
- Components: PascalCase (e.g., `Header.tsx`, `PostCard.tsx`)
- Utilities: camelCase (e.g., `fetcher.ts`, `i18n.tsx`)
- Collections: PascalCase (e.g., `Posts.ts`, `Users.ts`)
- Pages: lowercase directories with index `page.tsx` (e.g., `posts/page.tsx`, `posts/[slug]/page.tsx`)
- Animations: Descriptive names in subdirectory (e.g., `animations/ShinyText.tsx`)

**Directories:**
- Route groups: parentheses for grouping (e.g., `(site)`, `(payload)`)
- Dynamic routes: square brackets (e.g., `[slug]`, `[[...segments]]`)
- Feature directories: plural nouns (e.g., `components`, `collections`, `lib`)
- Icon directory: `icons` for SVG components

**Components:**
- Exported as named exports (e.g., `export function Header()`)
- Barrel files for related exports (e.g., `animations/index.ts`)
- Props passed via TypeScript interfaces (e.g., `interface PostCardProps`)

**Translation Keys:**
- Dot-notation hierarchy: `nav.posts`, `hero.greeting`, `posts.title`
- Defined in `src/lib/i18n.tsx` translations object
- Type-safe via `TranslationKey` type

## Where to Add New Code

**New Feature/Page:**
- Create directory in `src/app/(site)/` if public page
- Add `page.tsx` (RSC for data fetch) and layout if needed
- If needs shared data fetch: add to `src/collections/` collection config
- Example: Create `src/app/(site)/about/page.tsx` for new about page

**New Component:**
- Place in `src/components/` with matching feature name
- Use PascalCase filename
- Export as named export with TypeScript interface for props
- Example: `src/components/AboutHero.tsx`

**New Collection/Content Type:**
- Create new file in `src/collections/` (e.g., `Projects.ts`)
- Define CollectionConfig with fields, access rules, hooks
- Add to imports and collections array in `payload.config.ts`
- Auto-generated API endpoint at `/api/{slug}`
- Example: `src/collections/Projects.ts` creates `/api/projects`

**Shared Utility:**
- Place in `src/lib/` if widely used across components
- Use camelCase filename
- Export functions directly or as default
- Example: `src/lib/dateFormatter.ts`

**Animation Component:**
- Place in `src/components/animations/` with descriptive name
- Use Framer Motion library
- Export as named export
- Add to `animations/index.ts` barrel export
- Example: `src/components/animations/FadeInOnScroll.tsx`

**Icon Component:**
- Place in `src/components/icons/` as named export
- Create as SVG React component
- Keep minimal, no logic
- Example: `src/components/icons/ChevronIcon.tsx`

## Special Directories

**`.next/`:**
- Purpose: Build output directory
- Generated: Yes (by `next build`)
- Committed: No (.gitignored)

**`node_modules/`:**
- Purpose: NPM dependencies
- Generated: Yes (by `pnpm install`)
- Committed: No (.gitignored)

**`public/media/`:**
- Purpose: Payload-managed media uploads
- Generated: Partially (Payload creates as needed)
- Committed: Yes (media files checked in with repo)

**`src/app/(payload)/admin/`:**
- Purpose: Payload admin UI
- Generated: Yes (mostly auto-generated by Payload framework)
- Committed: Yes (importMap configuration)
- Note: `admin/importMap.ts` manually configured, rest auto-generated

## TypeScript & Path Aliases

**Path aliases in tsconfig.json:**
- `@/*` → `src/` (e.g., `@/components/Header` → `src/components/Header`)
- `@payload-config` → `payload.config.ts` (for Payload internal use)

**Auto-generated types:**
- `payload-types.ts`: Generated from Payload collections and fields
- Provides type safety for API responses and collection data
- Regenerated on `next build`

---

*Structure analysis: 2026-02-04*
